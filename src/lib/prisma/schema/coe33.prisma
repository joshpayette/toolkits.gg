enum COE33ItemCategory {
  CHROMA_ELIXIR
  COLOUR_OF_LUMINA
  COSTUME
  ENERGY_TINT
  HEALING_TINT
  LUMINA
  PICTO
  RECORD
  REVIVE_TINT
  SKILL
  WEAPON
}

enum COE33ItemTag {
  CRITICAL_RATE
  DEFENSE
  HEALTH
  SPEED
}

enum COE33Element {
  DARK
  EARTH
  FIRE
  ICE
  LIGHT
  LIGHTNING
  PHYSICAL
  VOID
}

enum COE33Stain {
  EARTH
  FIRE
  ICE
  LIGHT
  LIGHTNING
}

enum COE33Attribute {
  AGILITY
  DEFENSE
  LUCK
  MIGHT
  VITALITY
}

enum COE33Character {
  GUSTAVE
  LUNE
  MAELLE
  MONOCO
  SCIEL
  VERSO
}

model COE33Item {
  baseItem           BaseItem          @relation(fields: [baseItemId], references: [id], onDelete: Cascade)
  baseItemId         String            @unique
  slug               String            @unique
  // COE33 specific fields
  category           COE33ItemCategory
  tags               COE33ItemTag[]
  element            COE33Element
  primaryAttribute   COE33Attribute
  secondaryAttribute COE33Attribute?
  buildItems         COE33BuildItem[]
}

model COE33Build {
  baseBuild      BaseBuild        @relation(fields: [baseBuildId], references: [id], onDelete: Cascade)
  baseBuildId    String           @unique
  // COE33 specific fields
  items          COE33BuildItem[]
  character      COE33Character
  characterLevel Int
  vitality       Int
  might          Int
  agility        Int
  defense        Int
  luck           Int

  @@index([baseBuildId])
}

model COE33BuildItem {
  id          String      @id @default(cuid())
  level       Int         @default(1)
  amount      Int?
  coe33Item   COE33Item   @relation(fields: [coe33ItemId], references: [baseItemId], onDelete: Cascade)
  coe33ItemId String
  build       COE33Build? @relation(fields: [buildId], references: [baseBuildId])
  buildId     String?

  @@index([coe33ItemId])
  @@index([buildId])
}
